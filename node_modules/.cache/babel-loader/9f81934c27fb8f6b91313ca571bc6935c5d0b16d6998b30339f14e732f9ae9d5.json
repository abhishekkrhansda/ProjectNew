{"ast":null,"code":"import React,{useContext,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const BASE_URL=\"http://localhost:5000/api/\";const GlobalContext=/*#__PURE__*/React.createContext();export const GlobalProvider=_ref=>{let{children}=_ref;const[incomes,setIncomes]=useState([]);const[expenses,setExpenses]=useState([]);const[error,setError]=useState(null);// Calculate incomes\nconst getIncomes=async()=>{try{const response=await axios.get(\"\".concat(BASE_URL,\"get-incomes\"));setIncomes(response.data);console.log(response.data);}catch(error){console.error(\"Error fetching incomes:\",error);setError(\"Error fetching incomes\");}};const addIncome=async income=>{try{const response=await axios.post(\"\".concat(BASE_URL,\"add-income\"),income);getIncomes();}catch(error){var _error$response,_error$response$data;console.error(\"Error adding income:\",error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Error adding income\");}};const deleteIncome=async id=>{try{const res=await axios.delete(\"\".concat(BASE_URL,\"delete-income/\").concat(id));getIncomes();}catch(error){console.error(\"Error deleting income:\",error);setError(\"Error deleting income\");}};const totalIncome=()=>{return incomes.reduce((total,income)=>total+income.amount,0);};// Calculate expenses\nconst addExpense=async expense=>{try{const response=await axios.post(\"\".concat(BASE_URL,\"add-expense\"),expense);getExpenses();}catch(error){var _error$response2,_error$response2$data;console.error(\"Error adding expense:\",error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Error adding expense\");}};const getExpenses=async()=>{try{const response=await axios.get(\"\".concat(BASE_URL,\"get-expenses\"));setExpenses(response.data);console.log(response.data);}catch(error){console.error(\"Error fetching expenses:\",error);setError(\"Error fetching expenses\");}};const deleteExpense=async id=>{try{const res=await axios.delete(\"\".concat(BASE_URL,\"delete-expense/\").concat(id));getExpenses();}catch(error){console.error(\"Error deleting expense:\",error);setError(\"Error deleting expense\");}};const totalExpenses=()=>{return expenses.reduce((total,expense)=>total+expense.amount,0);};const totalBalance=()=>{return totalIncome()-totalExpenses();};const transactionHistory=()=>{const history=[...incomes,...expenses];history.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));return history.slice(0,3);};return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{addIncome,getIncomes,incomes,deleteIncome,expenses,totalIncome,addExpense,getExpenses,deleteExpense,totalExpenses,totalBalance,transactionHistory,error,setError},children:children});};export const useGlobalContext=()=>{return useContext(GlobalContext);};","map":{"version":3,"names":["React","useContext","useState","axios","jsx","_jsx","BASE_URL","GlobalContext","createContext","GlobalProvider","_ref","children","incomes","setIncomes","expenses","setExpenses","error","setError","getIncomes","response","get","concat","data","console","log","addIncome","income","post","_error$response","_error$response$data","message","deleteIncome","id","res","delete","totalIncome","reduce","total","amount","addExpense","expense","getExpenses","_error$response2","_error$response2$data","deleteExpense","totalExpenses","totalBalance","transactionHistory","history","sort","a","b","Date","createdAt","slice","Provider","value","useGlobalContext"],"sources":["/home/abhishek/sleepTracker/client/src/context/globalContext.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from 'axios';\n\nconst BASE_URL = \"http://localhost:5000/api/\";\n\nconst GlobalContext = React.createContext();\n\nexport const GlobalProvider = ({ children }) => {\n    const [incomes, setIncomes] = useState([]);\n    const [expenses, setExpenses] = useState([]);\n    const [error, setError] = useState(null);\n\n    // Calculate incomes\n    const getIncomes = async () => {\n        try {\n            const response = await axios.get(`${BASE_URL}get-incomes`);\n            setIncomes(response.data);\n            console.log(response.data);\n        } catch (error) {\n            console.error(\"Error fetching incomes:\", error);\n            setError(\"Error fetching incomes\");\n        }\n    };\n\n    const addIncome = async (income) => {\n        try {\n            const response = await axios.post(`${BASE_URL}add-income`, income);\n            getIncomes();\n        } catch (error) {\n            console.error(\"Error adding income:\", error);\n            setError(error.response?.data?.message || \"Error adding income\");\n        }\n    };\n\n    const deleteIncome = async (id) => {\n        try {\n            const res = await axios.delete(`${BASE_URL}delete-income/${id}`);\n            getIncomes();\n        } catch (error) {\n            console.error(\"Error deleting income:\", error);\n            setError(\"Error deleting income\");\n        }\n    };\n\n    const totalIncome = () => {\n        return incomes.reduce((total, income) => total + income.amount, 0);\n    };\n\n    // Calculate expenses\n    const addExpense = async (expense) => {\n        try {\n            const response = await axios.post(`${BASE_URL}add-expense`, expense);\n            getExpenses();\n        } catch (error) {\n            console.error(\"Error adding expense:\", error);\n            setError(error.response?.data?.message || \"Error adding expense\");\n        }\n    };\n\n    const getExpenses = async () => {\n        try {\n            const response = await axios.get(`${BASE_URL}get-expenses`);\n            setExpenses(response.data);\n            console.log(response.data);\n        } catch (error) {\n            console.error(\"Error fetching expenses:\", error);\n            setError(\"Error fetching expenses\");\n        }\n    };\n\n    const deleteExpense = async (id) => {\n        try {\n            const res = await axios.delete(`${BASE_URL}delete-expense/${id}`);\n            getExpenses();\n        } catch (error) {\n            console.error(\"Error deleting expense:\", error);\n            setError(\"Error deleting expense\");\n        }\n    };\n\n    const totalExpenses = () => {\n        return expenses.reduce((total, expense) => total + expense.amount, 0);\n    };\n\n    const totalBalance = () => {\n        return totalIncome() - totalExpenses();\n    };\n\n    const transactionHistory = () => {\n        const history = [...incomes, ...expenses];\n        history.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n        return history.slice(0, 3);\n    };\n\n    return (\n        <GlobalContext.Provider value={{\n            addIncome,\n            getIncomes,\n            incomes,\n            deleteIncome,\n            expenses,\n            totalIncome,\n            addExpense,\n            getExpenses,\n            deleteExpense,\n            totalExpenses,\n            totalBalance,\n            transactionHistory,\n            error,\n            setError\n        }}>\n            {children}\n        </GlobalContext.Provider>\n    );\n};\n\nexport const useGlobalContext = () => {\n    return useContext(GlobalContext);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}